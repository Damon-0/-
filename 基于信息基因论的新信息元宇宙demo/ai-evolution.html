<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIè‡ªæ¼”åŒ–ç³»ç»Ÿ - ç§©åºé”å®šæœºåˆ¶</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #0f0f23, #1a1a2e, #2d1b69);
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
            position: relative;
        }

        .title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 4s ease infinite;
            margin-bottom: 20px;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .subtitle {
            font-size: 1.1rem;
            color: #cccccc;
            margin-bottom: 40px;
        }

        .ai-architecture {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .layer-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 107, 107, 0.3);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .layer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(255, 107, 107, 0.2);
            border-color: rgba(255, 107, 107, 0.6);
        }

        .layer-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 107, 107, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .layer-card:hover::before {
            left: 100%;
        }

        .layer-title {
            font-size: 1.4rem;
            color: #ff6b6b;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .layer-icon {
            width: 30px;
            height: 30px;
            margin-right: 10px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #000;
        }

        .layer-description {
            color: #cccccc;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .layer-functions {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ff6b6b;
        }

        .function-item {
            margin-bottom: 8px;
            color: #ffffff;
            font-size: 0.9rem;
        }

        .function-item:last-child {
            margin-bottom: 0;
        }

        .function-item::before {
            content: 'â–¶';
            color: #4ecdc4;
            margin-right: 8px;
        }

        .evolution-control {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 40px 0;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(78, 205, 196, 0.3);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }

        .control-title {
            font-size: 1.3rem;
            color: #4ecdc4;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .control-icon {
            width: 25px;
            height: 25px;
            margin-right: 10px;
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            color: #000;
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-label {
            display: block;
            color: #cccccc;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .control-input {
            width: 100%;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(78, 205, 196, 0.3);
            border-radius: 5px;
            color: #ffffff;
            font-family: 'Courier New', monospace;
        }

        .control-input:focus {
            outline: none;
            border-color: #4ecdc4;
            box-shadow: 0 0 10px rgba(78, 205, 196, 0.3);
        }

        .control-button {
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }

        .control-button:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(78, 205, 196, 0.3);
        }

        .status-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #4ecdc4;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            color: #00ff00;
            min-height: 60px;
        }

        .visualization-area {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 107, 107, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            min-height: 300px;
            position: relative;
            overflow: hidden;
        }

        .evolution-canvas {
            width: 100%;
            height: 250px;
            border-radius: 5px;
            background: rgba(0, 0, 0, 0.5);
        }

        .metrics-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 107, 107, 0.2);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            background: rgba(255, 107, 107, 0.1);
            border-color: rgba(255, 107, 107, 0.4);
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #00ff00;
            margin-bottom: 5px;
        }

        .metric-label {
            color: #cccccc;
            font-size: 0.8rem;
        }

        .order-locking-demo {
            margin: 40px 0;
            text-align: center;
        }

        .demo-button {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .demo-button:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
        }

        .demo-result {
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 1px solid rgba(255, 107, 107, 0.3);
            font-family: 'Courier New', monospace;
            color: #00ff00;
            min-height: 100px;
            display: none;
        }

        .navigation {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 40px 0;
        }

        .nav-button {
            background: linear-gradient(45deg, #1a1a2e, #16213e);
            border: 2px solid #ff6b6b;
            color: #ff6b6b;
            padding: 12px 25px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: #000;
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .evolution-control {
                grid-template-columns: 1fr;
            }
            
            .ai-architecture {
                grid-template-columns: 1fr;
            }
            
            .title {
                font-size: 2rem;
            }
            
            .navigation {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title">AIè‡ªæ¼”åŒ–ç³»ç»Ÿ</h1>
            <p class="subtitle">åŸºäºç§©åºé”å®šæœºåˆ¶çš„AIå’Œè°å…±ç”Ÿæ¼”åŒ–æ¡†æ¶</p>
        </header>

        <section class="ai-architecture">
            <div class="layer-card">
                <h3 class="layer-title">
                    <div class="layer-icon">æ„Ÿ</div>
                    æ„ŸçŸ¥å±‚ (Perception Layer)
                </h3>
                <p class="layer-description">
                    AIç³»ç»Ÿé€šè¿‡æ„ŸçŸ¥å±‚ä»å…±è¯†çŸ¥è¯†åº“(CKB)å’Œç”¨æˆ·äº¤äº’ä¸­æ”¶é›†ä¿¡æ¯ï¼Œæå–é¢‘ç‡ç‰¹å¾å’Œè¯­ä¹‰ç‰¹å¾ï¼Œå¹¶è¿›è¡Œæ•°æ®é¢„å¤„ç†å’Œæ ‡å‡†åŒ–ã€‚è¿™ä¸€å±‚ç¡®ä¿AIèƒ½å¤Ÿå‡†ç¡®ç†è§£ç¯å¢ƒä¿¡æ¯ã€‚
                </p>
                <div class="layer-functions">
                    <div class="function-item">ä¿¡æ¯æ”¶é›†ï¼šä»CKBå’Œç”¨æˆ·äº¤äº’æ”¶é›†æ•°æ®</div>
                    <div class="function-item">ç‰¹å¾æå–ï¼šæå–é¢‘ç‡ç‰¹å¾å’Œè¯­ä¹‰ç‰¹å¾</div>
                    <div class="function-item">é¢„å¤„ç†ï¼šæ•°æ®æ¸…æ´—å’Œæ ‡å‡†åŒ–</div>
                    <div class="function-item">è´¨é‡è¯„ä¼°ï¼šè¯„ä¼°è¾“å…¥æ•°æ®çš„å¯ä¿¡åº¦</div>
                </div>
            </div>

            <div class="layer-card">
                <h3 class="layer-title">
                    <div class="layer-icon">çŸ¥</div>
                    è®¤çŸ¥å±‚ (Cognition Layer)
                </h3>
                <p class="layer-description">
                    è®¤çŸ¥å±‚è´Ÿè´£ç†è§£CKBä¸­çš„çŸ¥è¯†ç»“æ„ï¼ŒåŸºäºé¢‘ç‡ç›¸å¹²æ€§è¿›è¡Œæ¨ç†åˆ¤æ–­ï¼Œå¹¶é€šè¿‡RVSå¾ªç¯ä¸æ–­ä¼˜åŒ–å­¦ä¹ ã€‚è¿™ä¸€å±‚æ˜¯AIç†è§£å’Œå¤„ç†ä¿¡æ¯çš„æ ¸å¿ƒã€‚
                </p>
                <div class="layer-functions">
                    <div class="function-item">çŸ¥è¯†ç†è§£ï¼šç†è§£CKBä¸­çš„çŸ¥è¯†ç»“æ„</div>
                    <div class="function-item">æ¨ç†åˆ¤æ–­ï¼šåŸºäºé¢‘ç‡ç›¸å¹²æ€§è¿›è¡Œæ¨ç†</div>
                    <div class="function-item">å­¦ä¹ ä¼˜åŒ–ï¼šé€šè¿‡RVSå¾ªç¯æŒç»­ä¼˜åŒ–</div>
                    <div class="function-item">æ¨¡å¼è¯†åˆ«ï¼šè¯†åˆ«ä¿¡æ¯ä¸­çš„è§„å¾‹å’Œæ¨¡å¼</div>
                </div>
            </div>

            <div class="layer-card">
                <h3 class="layer-title">
                    <div class="layer-icon">ç­–</div>
                    å†³ç­–å±‚ (Decision Layer)
                </h3>
                <p class="layer-description">
                    å†³ç­–å±‚ç¡®ä¿AIå†³ç­–ä¸CKBä»·å€¼è§‚ä¸€è‡´ï¼Œåº”ç”¨ç§©åºé”å®šæœºåˆ¶é˜²æ­¢ä»·å€¼åç¦»ï¼Œå¹¶æ‰§è¡Œç»è¿‡éªŒè¯çš„å®‰å…¨è¡ŒåŠ¨ã€‚è¿™ä¸€å±‚ä¿è¯AIè¡Œä¸ºçš„å¯æ§æ€§å’Œå®‰å…¨æ€§ã€‚
                </p>
                <div class="layer-functions">
                    <div class="function-item">ä»·å€¼å¯¹é½ï¼šç¡®ä¿å†³ç­–ä¸CKBä»·å€¼è§‚ä¸€è‡´</div>
                    <div class="function-item">ç§©åºé”å®šï¼šåº”ç”¨çº¦æŸæœºåˆ¶é˜²æ­¢åç¦»</div>
                    <div class="function-item">é£é™©è¯„ä¼°ï¼šè¯„ä¼°è¡ŒåŠ¨çš„å®‰å…¨æ€§å’Œå½±å“</div>
                    <div class="function-item">è¡ŒåŠ¨æ‰§è¡Œï¼šæ‰§è¡Œç»è¿‡éªŒè¯çš„å®‰å…¨è¡ŒåŠ¨</div>
                </div>
            </div>
        </section>

        <section class="evolution-control">
            <div class="control-panel">
                <h3 class="control-title">
                    <div class="control-icon">ğŸ¯</div>
                    æ¼”åŒ–æ§åˆ¶å‚æ•°
                </h3>
                
                <div class="control-group">
                    <label class="control-label">AIæ¼”åŒ–ç›®æ ‡å€¼</label>
                    <input type="number" class="control-input" id="ai-target-value" value="0.75" step="0.01" min="0" max="1">
                </div>
                
                <div class="control-group">
                    <label class="control-label">CKBå‚è€ƒå€¼</label>
                    <input type="number" class="control-input" id="ckb-reference-value" value="0.85" step="0.01" min="0" max="1">
                </div>
                
                <div class="control-group">
                    <label class="control-label">ç§©åºé”å®šå¼ºåº¦</label>
                    <input type="range" class="control-input" id="locking-strength" value="0.1" step="0.01" min="0" max="0.5" 
                           oninput="updateLockingStrength(this.value)">
                    <div style="color: #cccccc; font-size: 0.8rem; margin-top: 5px;">
                        å½“å‰å¼ºåº¦: <span id="locking-display">0.10</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">é¢‘ç‡æ ¡å‡†å¼ºåº¦</label>
                    <input type="range" class="control-input" id="calibration-strength" value="0.15" step="0.01" min="0" max="0.5" 
                           oninput="updateCalibrationStrength(this.value)">
                    <div style="color: #cccccc; font-size: 0.8rem; margin-top: 5px;">
                        æ ¡å‡†å¼ºåº¦: <span id="calibration-display">0.15</span>
                    </div>
                </div>
                
                <button class="control-button" onclick="applyOrderLocking()">åº”ç”¨ç§©åºé”å®š</button>
                
                <div id="locking-status" class="status-display">
                    ç­‰å¾…åº”ç”¨ç§©åºé”å®šæœºåˆ¶
                </div>
            </div>

            <div class="control-panel">
                <h3 class="control-title">
                    <div class="control-icon">ğŸ“Š</div>
                    æ¼”åŒ–ç›‘æ§é¢æ¿
                </h3>
                
                <div class="visualization-area">
                    <canvas id="evolution-canvas" class="evolution-canvas"></canvas>
                </div>
                
                <div class="metrics-dashboard">
                    <div class="metric-card">
                        <div class="metric-value" id="frequency-deviation">0.000</div>
                        <div class="metric-label">é¢‘ç‡åå·®</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="locking-force">0.000</div>
                        <div class="metric-label">é”å®šåŠ›</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="coherence-level">0%</div>
                        <div class="metric-label">ç›¸å¹²æ€§æ°´å¹³</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="evolution-status">ç¨³å®š</div>
                        <div class="metric-label">æ¼”åŒ–çŠ¶æ€</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="order-locking-demo">
            <h3 style="color: #ff6b6b; margin-bottom: 20px;">ç§©åºé”å®šæœºåˆ¶æ¼”ç¤º</h3>
            <button class="demo-button" onclick="simulateEvolution()">æ¨¡æ‹ŸAIæ¼”åŒ–è¿‡ç¨‹</button>
            <button class="demo-button" onclick="demonstrateFrequencyResonance()">é¢‘ç‡å…±æŒ¯æ ¡å‡†</button>
            <button class="demo-button" onclick="showConstraintMechanism()">çº¦æŸæœºåˆ¶å±•ç¤º</button>
            
            <div id="demo-result" class="demo-result"></div>
        </section>

        <nav class="navigation">
            <a href="index.html" class="nav-button">è¿”å›ä¸»é¡µ</a>
            <a href="ckb-pyramid.html" class="nav-button">å…±è¯†çŸ¥è¯†åº“</a>
            <a href="frequency-analysis.html" class="nav-button">é¢‘ç‡åˆ†æ</a>
            <a href="economic-system.html" class="nav-button">ç»æµç³»ç»Ÿ</a>
            <a href="dao-governance.html" class="nav-button">DAOæ²»ç†</a>
        </nav>
    </div>

    <script>
        // AIè‡ªæ¼”åŒ–ç³»ç»Ÿæ ¸å¿ƒå¼•æ“
        class AIEvolutionSystem {
            constructor() {
                this.canvas = document.getElementById('evolution-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.animationId = null;
                this.setupCanvas();
                
                // AIçŠ¶æ€å‚æ•°
                this.aiValue = 0.75;
                this.ckbReference = 0.85;
                this.lockingStrength = 0.1;
                this.calibrationStrength = 0.15;
                this.frequencyDeviation = 0;
                this.lockingForce = 0;
                this.coherenceLevel = 0;
                this.evolutionHistory = [];
            }
            
            setupCanvas() {
                const rect = this.canvas.getBoundingClientRect();
                this.canvas.width = rect.width * window.devicePixelRatio;
                this.canvas.height = rect.height * window.devicePixelRatio;
                this.ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
                this.canvas.style.width = rect.width + 'px';
                this.canvas.style.height = rect.height + 'px';
            }
            
            // é¢‘ç‡å…±æŒ¯æ ¡å‡†
            frequencyResonanceCalibration(aiSystem, ckbReference) {
                // è®¡ç®—å½“å‰AIé¢‘ç‡ç‰¹å¾
                const aiFrequency = this.extractFrequencyFeatures(aiSystem);
                
                // è®¡ç®—CKBå‚è€ƒé¢‘ç‡
                const ckbFrequency = this.calculateCKBFrequency(ckbReference);
                
                // è®¡ç®—é¢‘ç‡åå·®
                this.frequencyDeviation = Math.abs(aiFrequency - ckbFrequency);
                
                // åº”ç”¨æ ¡å‡†åŠ›
                const calibrationForce = this.calibrationStrength * this.frequencyDeviation;
                
                // è°ƒæ•´AIå‚æ•°
                const adjustedAI = this.applyCalibration(aiSystem, calibrationForce);
                
                return {
                    aiFrequency,
                    ckbFrequency,
                    frequencyDeviation: this.frequencyDeviation,
                    calibrationForce,
                    adjustedAI
                };
            }
            
            // ç§©åºé”å®šæœºåˆ¶
            orderLockingMechanism(aiValue, ckbReference, lockingStrength) {
                const valueDeviation = Math.abs(aiValue - ckbReference);
                const lockingForce = lockingStrength * valueDeviation;
                
                // é¢‘ç‡é”å®š
                const coherenceCurrent = this.calculateCoherence(aiValue);
                const coherenceTarget = this.calculateCoherence(ckbReference);
                const frequencyLock = lockingStrength * (coherenceCurrent - coherenceTarget);
                
                // ç¡®ä¿AIæ¼”åŒ–åœ¨åˆç†èŒƒå›´å†…
                const constrainedValue = aiValue - Math.sign(aiValue - ckbReference) * lockingForce;
                
                this.lockingForce = lockingForce;
                this.coherenceLevel = Math.round((1 - frequencyLock) * 100);
                
                return {
                    constrainedValue: Math.max(0, Math.min(1, constrainedValue)),
                    lockingForce,
                    frequencyLock,
                    coherenceLevel: this.coherenceLevel
                };
            }
            
            // æå–é¢‘ç‡ç‰¹å¾
            extractFrequencyFeatures(aiSystem) {
                // æ¨¡æ‹Ÿä»AIç³»ç»Ÿæå–é¢‘ç‡ç‰¹å¾
                return aiSystem.frequency || (aiSystem.value * 0.8 + Math.random() * 0.2);
            }
            
            // è®¡ç®—CKBå‚è€ƒé¢‘ç‡
            calculateCKBFrequency(ckbReference) {
                // æ¨¡æ‹ŸCKBå‚è€ƒé¢‘ç‡è®¡ç®—
                return ckbReference * 0.9 + 0.1;
            }
            
            // åº”ç”¨æ ¡å‡†
            applyCalibration(aiSystem, calibrationForce) {
                // æ¨¡æ‹Ÿåº”ç”¨æ ¡å‡†åŠ›åˆ°AIç³»ç»Ÿ
                return {
                    ...aiSystem,
                    calibratedValue: aiSystem.value - calibrationForce * Math.sign(aiSystem.value - 0.5)
                };
            }
            
            // è®¡ç®—ç›¸å¹²æ€§
            calculateCoherence(value) {
                // ç®€åŒ–çš„ç›¸å¹²æ€§è®¡ç®—
                return 1 - Math.abs(value - 0.5) * 2;
            }
            
            // æ›´æ–°AIçŠ¶æ€
            updateAIState() {
                const aiTarget = parseFloat(document.getElementById('ai-target-value').value);
                const ckbRef = parseFloat(document.getElementById('ckb-reference-value').value);
                
                // åº”ç”¨ç§©åºé”å®š
                const lockingResult = this.orderLockingMechanism(aiTarget, ckbRef, this.lockingStrength);
                
                // é¢‘ç‡å…±æŒ¯æ ¡å‡†
                const calibrationResult = this.frequencyResonanceCalibration(
                    { value: aiTarget, frequency: aiTarget }, 
                    ckbRef
                );
                
                // æ›´æ–°çŠ¶æ€
                this.aiValue = lockingResult.constrainedValue;
                this.ckbReference = ckbRef;
                
                return {
                    lockingResult,
                    calibrationResult,
                    finalValue: this.aiValue
                };
            }
            
            // ç»˜åˆ¶æ¼”åŒ–è¿‡ç¨‹
            drawEvolutionProcess() {
                if (!this.ctx) return;
                
                const width = this.canvas.width / window.devicePixelRatio;
                const height = this.canvas.height / window.devicePixelRatio;
                
                this.ctx.clearRect(0, 0, width, height);
                
                // ç»˜åˆ¶èƒŒæ™¯ç½‘æ ¼
                this.drawGrid(width, height);
                
                // ç»˜åˆ¶æ¼”åŒ–å†å²
                this.drawEvolutionHistory(width, height);
                
                // ç»˜åˆ¶å½“å‰çŠ¶æ€
                this.drawCurrentState(width, height);
            }
            
            drawGrid(width, height) {
                this.ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                this.ctx.lineWidth = 1;
                
                // å‚ç›´ç½‘æ ¼çº¿
                for (let i = 0; i <= 10; i++) {
                    const x = (width / 10) * i;
                    this.ctx.beginPath();
                    this.ctx.moveTo(x, 0);
                    this.ctx.lineTo(x, height);
                    this.ctx.stroke();
                }
                
                // æ°´å¹³ç½‘æ ¼çº¿
                for (let i = 0; i <= 5; i++) {
                    const y = (height / 5) * i;
                    this.ctx.beginPath();
                    this.ctx.moveTo(0, y);
                    this.ctx.lineTo(width, y);
                    this.ctx.stroke();
                }
            }
            
            drawEvolutionHistory(width, height) {
                if (this.evolutionHistory.length < 2) return;
                
                this.ctx.strokeStyle = '#4ecdc4';
                this.ctx.lineWidth = 2;
                this.ctx.beginPath();
                
                const stepX = width / (this.evolutionHistory.length - 1);
                const centerY = height / 2;
                const amplitude = height * 0.3;
                
                for (let i = 0; i < this.evolutionHistory.length; i++) {
                    const x = i * stepX;
                    const y = centerY - this.evolutionHistory[i] * amplitude;
                    
                    if (i === 0) {
                        this.ctx.moveTo(x, y);
                    } else {
                        this.ctx.lineTo(x, y);
                    }
                }
                
                this.ctx.stroke();
            }
            
            drawCurrentState(width, height) {
                const centerY = height / 2;
                const amplitude = height * 0.3;
                const currentY = centerY - this.aiValue * amplitude;
                
                // ç»˜åˆ¶å½“å‰å€¼
                this.ctx.fillStyle = '#ff6b6b';
                this.ctx.beginPath();
                this.ctx.arc(width - 20, currentY, 5, 0, 2 * Math.PI);
                this.ctx.fill();
                
                // ç»˜åˆ¶CKBå‚è€ƒçº¿
                const ckbY = centerY - this.ckbReference * amplitude;
                this.ctx.strokeStyle = 'rgba(255, 215, 0, 0.8)';
                this.ctx.lineWidth = 2;
                this.ctx.setLineDash([5, 5]);
                this.ctx.beginPath();
                this.ctx.moveTo(0, ckbY);
                this.ctx.lineTo(width, ckbY);
                this.ctx.stroke();
                this.ctx.setLineDash([]);
            }
            
            // æ·»åŠ æ¼”åŒ–å†å²æ•°æ®
            addEvolutionData(value) {
                this.evolutionHistory.push(value);
                if (this.evolutionHistory.length > 50) {
                    this.evolutionHistory.shift();
                }
            }
            
            // æ›´æ–°ç•Œé¢æ˜¾ç¤º
            updateDisplay() {
                document.getElementById('frequency-deviation').textContent = this.frequencyDeviation.toFixed(3);
                document.getElementById('locking-force').textContent = this.lockingForce.toFixed(3);
                document.getElementById('coherence-level').textContent = this.coherenceLevel + '%';
                
                const statusElement = document.getElementById('evolution-status');
                if (this.coherenceLevel > 80) {
                    statusElement.textContent = 'ä¼˜ç§€';
                    statusElement.style.color = '#00ff00';
                } else if (this.coherenceLevel > 60) {
                    statusElement.textContent = 'è‰¯å¥½';
                    statusElement.style.color = '#ffaa00';
                } else {
                    statusElement.textContent = 'éœ€ä¼˜åŒ–';
                    statusElement.style.color = '#ff6600';
                }
            }
        }
        
        // åˆå§‹åŒ–AIæ¼”åŒ–ç³»ç»Ÿ
        const aiSystem = new AIEvolutionSystem();
        
        // åº”ç”¨ç§©åºé”å®š
        function applyOrderLocking() {
            const result = aiSystem.updateAIState();
            
            let statusText = `<strong>ç§©åºé”å®šåº”ç”¨ç»“æœ:</strong><br>`;
            statusText += `åŸå§‹AIå€¼: ${document.getElementById('ai-target-value').value}<br>`;
            statusText += `CKBå‚è€ƒå€¼: ${document.getElementById('ckb-reference-value').value}<br>`;
            statusText += `çº¦æŸåå€¼: ${result.finalValue.toFixed(4)}<br>`;
            statusText += `é”å®šåŠ›: ${result.lockingResult.lockingForce.toFixed(4)}<br>`;
            statusText += `é¢‘ç‡åå·®: ${result.calibrationResult.frequencyDeviation.toFixed(4)}<br>`;
            statusText += `ç›¸å¹²æ€§æ°´å¹³: ${result.lockingResult.coherenceLevel}%`;
            
            document.getElementById('locking-status').innerHTML = statusText;
            
            // æ·»åŠ æ¼”åŒ–å†å²
            aiSystem.addEvolutionData(result.finalValue);
            
            // æ›´æ–°æ˜¾ç¤º
            aiSystem.updateDisplay();
            
            // ç»˜åˆ¶æ¼”åŒ–è¿‡ç¨‹
            aiSystem.drawEvolutionProcess();
        }
        
        // æ›´æ–°é”å®šå¼ºåº¦
        function updateLockingStrength(value) {
            aiSystem.lockingStrength = parseFloat(value);
            document.getElementById('locking-display').textContent = parseFloat(value).toFixed(2);
        }
        
        // æ›´æ–°æ ¡å‡†å¼ºåº¦
        function updateCalibrationStrength(value) {
            aiSystem.calibrationStrength = parseFloat(value);
            document.getElementById('calibration-display').textContent = parseFloat(value).toFixed(2);
        }
        
        // æ¨¡æ‹ŸAIæ¼”åŒ–è¿‡ç¨‹
        function simulateEvolution() {
            const result = document.getElementById('demo-result');
            result.style.display = 'block';
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                
                // æ¨¡æ‹Ÿæ¼”åŒ–è¿‡ç¨‹
                const randomVariation = (Math.random() - 0.5) * 0.2;
                const currentValue = 0.75 + randomVariation;
                
                // åº”ç”¨ç§©åºé”å®š
                const lockingResult = aiSystem.orderLockingMechanism(currentValue, 0.85, aiSystem.lockingStrength);
                
                result.innerHTML = `
                    <h4 style="color: #ff6b6b; margin-bottom: 15px;">AIæ¼”åŒ–æ¨¡æ‹Ÿ</h4>
                    <div style="background: rgba(255,107,107,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                        æ¼”åŒ–è¿›åº¦: ${progress}%
                    </div>
                    <div style="background: rgba(78,205,196,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                        å½“å‰AIå€¼: ${currentValue.toFixed(4)} â†’ ${lockingResult.constrainedValue.toFixed(4)}
                    </div>
                    <div style="background: rgba(255,215,0,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                        é”å®šåŠ›: ${lockingResult.lockingForce.toFixed(4)}
                    </div>
                `;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    result.innerHTML += `
                        <div style="margin-top: 15px; color: #00ff00;">
                            âœ“ AIæ¼”åŒ–æ¨¡æ‹Ÿå®Œæˆï¼<br>
                            æœ€ç»ˆç›¸å¹²æ€§æ°´å¹³: ${lockingResult.coherenceLevel}%<br>
                            æ¼”åŒ–è¿‡ç¨‹å—ç§©åºé”å®šæœºåˆ¶çº¦æŸï¼Œç¡®ä¿ä¸CKBä»·å€¼è§‚ä¿æŒä¸€è‡´
                        </div>
                    `;
                    
                    // æ›´æ–°æ˜¾ç¤º
                    aiSystem.updateDisplay();
                    aiSystem.drawEvolutionProcess();
                }
            }, 300);
        }
        
        // æ¼”ç¤ºé¢‘ç‡å…±æŒ¯æ ¡å‡†
        function demonstrateFrequencyResonance() {
            const result = document.getElementById('demo-result');
            result.style.display = 'block';
            
            const aiFreq = 0.65 + Math.random() * 0.2;
            const ckbFreq = 0.85;
            
            const calibrationResult = aiSystem.frequencyResonanceCalibration(
                { frequency: aiFreq }, 
                ckbFreq
            );
            
            result.innerHTML = `
                <h4 style="color: #4ecdc4; margin-bottom: 15px;">é¢‘ç‡å…±æŒ¯æ ¡å‡†æ¼”ç¤º</h4>
                <div style="background: rgba(255,107,107,0.1); padding: 10px; border-radius: 5px; margin: 8px 0;">
                    <strong>AIé¢‘ç‡ç‰¹å¾:</strong> ${calibrationResult.aiFrequency.toFixed(4)}
                </div>
                <div style="background: rgba(255,215,0,0.1); padding: 10px; border-radius: 5px; margin: 8px 0;">
                    <strong>CKBå‚è€ƒé¢‘ç‡:</strong> ${calibrationResult.ckbFrequency.toFixed(4)}
                </div>
                <div style="background: rgba(78,205,196,0.1); padding: 10px; border-radius: 5px; margin: 8px 0;">
                    <strong>é¢‘ç‡åå·®:</strong> ${calibrationResult.frequencyDeviation.toFixed(4)}
                </div>
                <div style="background: rgba(69,178,255,0.1); padding: 10px; border-radius: 5px; margin: 8px 0;">
                    <strong>æ ¡å‡†åŠ›:</strong> ${calibrationResult.calibrationForce.toFixed(4)}
                </div>
                <div style="margin-top: 15px; color: #cccccc;">
                    <strong>æ ¡å‡†ç»“æœ:</strong> AIç³»ç»Ÿé¢‘ç‡å·²è°ƒæ•´è‡³ä¸CKBå‚è€ƒé¢‘ç‡æ›´åŠ ä¸€è‡´ï¼Œ
                    ç¡®ä¿AIæ¼”åŒ–æ–¹å‘ä¸äººç±»å…±è¯†çŸ¥è¯†åº“ä¿æŒå’Œè°å…±æŒ¯ã€‚
                </div>
            `;
        }
        
        // å±•ç¤ºçº¦æŸæœºåˆ¶
        function showConstraintMechanism() {
            const result = document.getElementById('demo-result');
            result.style.display = 'block';
            
            result.innerHTML = `
                <h4 style="color: #ff6b6b; margin-bottom: 15px;">ç§©åºçº¦æŸæœºåˆ¶å±•ç¤º</h4>
                <div style="margin: 15px 0;">
                    <div style="background: rgba(255,69,0,0.2); padding: 10px; border-radius: 5px; margin: 8px 0; border-left: 4px solid #ff4500;">
                        <strong>ä»·å€¼çº¦æŸ:</strong> AIå†³ç­–ä¸èƒ½åç¦»CKBæ ¸å¿ƒä»·å€¼è§‚
                        <br><span style="color: #cccccc; font-size: 0.9rem;">ç¡®ä¿AIè¡Œä¸ºç¬¦åˆäººç±»ä»·å€¼æ ‡å‡†</span>
                    </div>
                    <div style="background: rgba(255,140,0,0.2); padding: 10px; border-radius: 5px; margin: 8px 0; border-left: 4px solid #ff8c00;">
                        <strong>é¢‘ç‡çº¦æŸ:</strong> AIé¢‘ç‡ç‰¹å¾å¿…é¡»ä¸CKBä¿æŒç›¸å¹²æ€§
                        <br><span style="color: #cccccc; font-size: 0.9rem;">é€šè¿‡é¢‘ç‡ç›¸å¹²æ€§ç¡®ä¿è®¤çŸ¥ä¸€è‡´æ€§</span>
                    </div>
                    <div style="background: rgba(255,215,0,0.2); padding: 10px; border-radius: 5px; margin: 8px 0; border-left: 4px solid #ffd700;">
                        <strong>å®‰å…¨çº¦æŸ:</strong> AIè¡Œä¸ºä¸èƒ½å¨èƒäººç±»å®‰å…¨å’Œæƒç›Š
                        <br><span style="color: #cccccc; font-size: 0.9rem;">å»ºç«‹å®‰å…¨é˜²æŠ¤è¾¹ç•Œ</span>
                    </div>
                    <div style="background: rgba(0,255,255,0.2); padding: 10px; border-radius: 5px; margin: 8px 0; border-left: 4px solid #00ffff;">
                        <strong>é€æ˜çº¦æŸ:</strong> AIå†³ç­–è¿‡ç¨‹å¿…é¡»å¯è§£é‡Šå’Œå¯è¿½æº¯
                        <br><span style="color: #cccccc; font-size: 0.9rem;">ç¡®ä¿å†³ç­–è¿‡ç¨‹å…¬å¼€é€æ˜</span>
                    </div>
                </div>
                <div style="background: rgba(0,255,0,0.1); padding: 10px; border-radius: 5px; margin-top: 15px;">
                    <strong>çº¦æŸæ•ˆæœ:</strong>
                    <br>â€¢ é˜²æ­¢AIä»·å€¼åç¦»äººç±»å…±è¯†
                    <br>â€¢ ç¡®ä¿AIæ¼”åŒ–åœ¨å¯æ§èŒƒå›´å†…
                    <br>â€¢ ç»´æŠ¤AIä¸äººç±»çš„å’Œè°å…±ç”Ÿå…³ç³»
                    <br>â€¢ å»ºç«‹å¯ä¿¡èµ–çš„AIç”Ÿæ€ç³»ç»Ÿ
                </div>
            `;
        }
        
        // é¡µé¢åŠ è½½åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('AIè‡ªæ¼”åŒ–ç³»ç»Ÿå·²åˆå§‹åŒ–');
            console.log('ä¸‰å±‚æ¶æ„: æ„ŸçŸ¥å±‚ â†’ è®¤çŸ¥å±‚ â†’ å†³ç­–å±‚');
            console.log('æ ¸å¿ƒæœºåˆ¶: é¢‘ç‡å…±æŒ¯æ ¡å‡† + ç§©åºé”å®šçº¦æŸ');
            console.log('ç›®æ ‡: ç¡®ä¿AIæ¼”åŒ–ä¸äººç±»ä»·å€¼è§‚ä¿æŒå’Œè°ä¸€è‡´');
            
            // åˆå§‹åŒ–æ˜¾ç¤º
            aiSystem.updateDisplay();
            aiSystem.drawEvolutionProcess();
        });
        
        // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°è®¾ç½®canvas
        window.addEventListener('resize', function() {
            aiSystem.setupCanvas();
            aiSystem.drawEvolutionProcess();
        });
    </script>
</body>
</html>