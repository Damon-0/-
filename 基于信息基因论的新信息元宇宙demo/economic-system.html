<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿¡æ¯å¸ç»æµç³»ç»Ÿ - INCä»£å¸ç»æµ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #0f0f23, #1a1a2e, #2d1b69);
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
            position: relative;
        }

        .title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ffd700, #ffed4e, #fff59d);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 4s ease infinite;
            margin-bottom: 20px;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .subtitle {
            font-size: 1.1rem;
            color: #cccccc;
            margin-bottom: 40px;
        }

        .economic-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .overview-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .overview-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(255, 215, 0, 0.2);
            border-color: rgba(255, 215, 0, 0.6);
        }

        .overview-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .overview-card:hover::before {
            left: 100%;
        }

        .overview-title {
            font-size: 1.4rem;
            color: #ffd700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .overview-icon {
            width: 30px;
            height: 30px;
            margin-right: 10px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #000;
        }

        .overview-description {
            color: #cccccc;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .economic-metrics {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffd700;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-family: 'Courier New', monospace;
        }

        .metric-row:last-child {
            margin-bottom: 0;
        }

        .metric-label {
            color: #ffd700;
        }

        .metric-value {
            color: #00ff00;
            font-weight: bold;
        }

        .simulation-control {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 40px 0;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 140, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }

        .control-title {
            font-size: 1.3rem;
            color: #ff8c00;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .control-icon {
            width: 25px;
            height: 25px;
            margin-right: 10px;
            background: linear-gradient(45deg, #ff8c00, #ffa500);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            color: #000;
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-label {
            display: block;
            color: #cccccc;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .control-input {
            width: 100%;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 140, 0, 0.3);
            border-radius: 5px;
            color: #ffffff;
            font-family: 'Courier New', monospace;
        }

        .control-input:focus {
            outline: none;
            border-color: #ff8c00;
            box-shadow: 0 0 10px rgba(255, 140, 0, 0.3);
        }

        .control-button {
            background: linear-gradient(45deg, #ff8c00, #ffa500);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }

        .control-button:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(255, 140, 0, 0.3);
        }

        .status-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ff8c00;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            color: #00ff00;
            min-height: 60px;
        }

        .visualization-area {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            min-height: 300px;
            position: relative;
            overflow: hidden;
        }

        .economy-canvas {
            width: 100%;
            height: 250px;
            border-radius: 5px;
            background: rgba(0, 0, 0, 0.5);
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            background: rgba(255, 215, 0, 0.1);
            border-color: rgba(255, 215, 0, 0.4);
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #00ff00;
            margin-bottom: 5px;
        }

        .metric-label {
            color: #cccccc;
            font-size: 0.8rem;
        }

        .simulation-demo {
            margin: 40px 0;
            text-align: center;
        }

        .demo-button {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            border: none;
            color: #000;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .demo-button:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(255, 215, 0, 0.3);
        }

        .demo-result {
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            font-family: 'Courier New', monospace;
            color: #00ff00;
            min-height: 100px;
            display: none;
        }

        .allocation-chart {
            display: flex;
            justify-content: space-around;
            align-items: end;
            margin: 20px 0;
            height: 120px;
            padding: 0 20px;
        }

        .allocation-bar {
            background: linear-gradient(to top, #ffd700, #ffed4e);
            border-radius: 5px 5px 0 0;
            min-width: 60px;
            position: relative;
            transition: all 0.3s ease;
        }

        .allocation-bar:hover {
            transform: scaleY(1.1);
            box-shadow: 0 -5px 15px rgba(255, 215, 0, 0.5);
        }

        .allocation-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: #cccccc;
            text-align: center;
            width: 80px;
        }

        .allocation-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9rem;
            font-weight: bold;
            color: #ffd700;
        }

        .navigation {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 40px 0;
        }

        .nav-button {
            background: linear-gradient(45deg, #1a1a2e, #16213e);
            border: 2px solid #ffd700;
            color: #ffd700;
            padding: 12px 25px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000;
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .simulation-control {
                grid-template-columns: 1fr;
            }
            
            .economic-overview {
                grid-template-columns: 1fr;
            }
            
            .title {
                font-size: 2rem;
            }
            
            .allocation-chart {
                flex-direction: column;
                height: auto;
                align-items: center;
            }
            
            .allocation-bar {
                width: 200px;
                height: 30px;
                margin: 10px 0;
                border-radius: 0 5px 5px 0;
            }
            
            .allocation-label {
                position: static;
                transform: none;
                margin-top: 5px;
            }
            
            .allocation-value {
                position: static;
                transform: none;
                margin-bottom: 5px;
            }
            
            .navigation {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title">ä¿¡æ¯å¸ç»æµç³»ç»Ÿ</h1>
            <p class="subtitle">åŸºäºçŸ¥è¯†ä»·å€¼å’Œè½½ä½“è´¡çŒ®çš„å»ä¸­å¿ƒåŒ–ç»æµæ¨¡å‹</p>
        </header>

        <section class="economic-overview">
            <div class="overview-card">
                <h3 class="overview-title">
                    <div class="overview-icon">ğŸ’°</div>
                    ä¿¡æ¯å¸ (INC) æ¦‚è§ˆ
                </h3>
                <p class="overview-description">
                    ä¿¡æ¯å¸æ˜¯æ–°ä¿¡æ¯å…ƒå®‡å®™å¹³å°çš„åŸç”Ÿä»£å¸ï¼Œç”¨äºæ¿€åŠ±çŸ¥è¯†è´¡çŒ®å’Œå¹³å°æ²»ç†ã€‚åŸºäºçŸ¥è¯†ä»·å€¼(Q_c)å’Œè½½ä½“è´¡çŒ®ç³»æ•°(V_c)çš„åŠ æƒåˆ†é…æœºåˆ¶ã€‚
                </p>
                <div class="economic-metrics">
                    <div class="metric-row">
                        <span class="metric-label">æ€»ä¾›åº”é‡:</span>
                        <span class="metric-value">1,000,000,000 INC</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">å½“å‰æµé€šé‡:</span>
                        <span class="metric-value" id="current-supply">400,000,000 INC</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">åŸºç¡€æ±‡ç‡:</span>
                        <span class="metric-value">1 INC = 1 æ ‡å‡†çŸ¥è¯†å•ä½</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">å½“å‰æ±‡ç‡:</span>
                        <span class="metric-value" id="current-rate">1.00</span>
                    </div>
                </div>
            </div>

            <div class="overview-card">
                <h3 class="overview-title">
                    <div class="overview-icon">ğŸ“Š</div>
                    ä»£å¸åˆ†é…æœºåˆ¶
                </h3>
                <p class="overview-description">
                    é‡‡ç”¨å…¬å¹³é€æ˜çš„åˆ†é…æœºåˆ¶ï¼Œ40%ç”¨äºç¤¾åŒºæ¿€åŠ±ï¼Œ20%ç»™å¼€å‘å›¢é˜Ÿï¼Œ25%ç”¨äºç”Ÿæ€å»ºè®¾ï¼Œ15%ä½œä¸ºDAOå‚¨å¤‡ã€‚
                </p>
                <div class="allocation-chart">
                    <div class="allocation-bar" style="height: 40%;">
                        <div class="allocation-value">40%</div>
                        <div class="allocation-label">ç¤¾åŒºæ¿€åŠ±</div>
                    </div>
                    <div class="allocation-bar" style="height: 20%;">
                        <div class="allocation-value">20%</div>
                        <div class="allocation-label">å¼€å‘å›¢é˜Ÿ</div>
                    </div>
                    <div class="allocation-bar" style="height: 25%;">
                        <div class="allocation-value">25%</div>
                        <div class="allocation-label">ç”Ÿæ€å»ºè®¾</div>
                    </div>
                    <div class="allocation-bar" style="height: 15%;">
                        <div class="allocation-value">15%</div>
                        <div class="allocation-label">DAOå‚¨å¤‡</div>
                    </div>
                </div>
            </div>

            <div class="overview-card">
                <h3 class="overview-title">
                    <div class="overview-icon">ğŸ¯</div>
                    ä»·å€¼è¯„ä¼°ä½“ç³»
                </h3>
                <p class="overview-description">
                    åŸºäºçŸ¥è¯†ä»·å€¼å’Œè½½ä½“è´¡çŒ®çš„ç»¼åˆè¯„ä¼°æ¨¡å‹ï¼Œç¡®ä¿ä»£å¸åˆ†é…ä¸å®é™…è´¡çŒ®åº¦ç›¸åŒ¹é…ã€‚
                </p>
                <div class="economic-metrics">
                    <div class="metric-row">
                        <span class="metric-label">çŸ¥è¯†ä»·å€¼(Q_c):</span>
                        <span class="metric-value" id="knowledge-value">0.75</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">ç¨€ç¼ºç³»æ•°(S_c):</span>
                        <span class="metric-value" id="scarcity-coeff">1.20</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">è½½ä½“è´¡çŒ®(V_c):</span>
                        <span class="metric-value" id="carrier-coeff">0.85</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">æœ€ç»ˆæ±‡ç‡:</span>
                        <span class="metric-value" id="final-rate">0.77</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="simulation-control">
            <div class="control-panel">
                <h3 class="control-title">
                    <div class="control-icon">ğŸ®</div>
                    ç»æµç³»ç»Ÿæ¨¡æ‹Ÿå™¨
                </h3>
                
                <div class="control-group">
                    <label class="control-label">çŸ¥è¯†è´¡çŒ®è´¨é‡ (0-1)</label>
                    <input type="range" class="control-input" id="knowledge-quality" value="0.75" step="0.01" min="0" max="1" 
                           oninput="updateKnowledgeQuality(this.value)">
                    <div style="color: #cccccc; font-size: 0.8rem; margin-top: 5px;">
                        è´¨é‡è¯„åˆ†: <span id="quality-display">0.75</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">é¢†åŸŸç¨€ç¼ºæ€§ (0.5-2.0)</label>
                    <input type="range" class="control-input" id="domain-scarcity" value="1.20" step="0.01" min="0.5" max="2.0" 
                           oninput="updateDomainScarcity(this.value)">
                    <div style="color: #cccccc; font-size: 0.8rem; margin-top: 5px;">
                        ç¨€ç¼ºç³»æ•°: <span id="scarcity-display">1.20</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">è½½ä½“è´¡çŒ®åº¦ (0-1)</label>
                    <input type="range" class="control-input" id="carrier-contribution" value="0.85" step="0.01" min="0" max="1" 
                           oninput="updateCarrierContribution(this.value)">
                    <div style="color: #cccccc; font-size: 0.8rem; margin-top: 5px;">
                        è´¡çŒ®ç³»æ•°: <span id="contribution-display">0.85</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">è´¡çŒ®ç±»å‹</label>
                    <select class="control-input" id="contribution-type">
                        <option value="knowledge">çŸ¥è¯†è´¡çŒ®</option>
                        <option value="validation">éªŒè¯å·¥ä½œ</option>
                        <option value="governance">æ²»ç†å‚ä¸</option>
                        <option value="ecosystem">ç”Ÿæ€å»ºè®¾</option>
                    </select>
                </div>
                
                <button class="control-button" onclick="calculateEconomicValue()">è®¡ç®—ç»æµä»·å€¼</button>
                
                <div id="calculation-result" class="status-display">
                    è°ƒæ•´å‚æ•°å¹¶ç‚¹å‡»è®¡ç®—æŒ‰é’®
                </div>
            </div>

            <div class="control-panel">
                <h3 class="control-title">
                    <div class="control-icon">ğŸ“ˆ</div>
                    å®æ—¶ç»æµç›‘æ§
                </h3>
                
                <div class="visualization-area">
                    <canvas id="economy-canvas" class="economy-canvas"></canvas>
                </div>
                
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value" id="current-price">1.00</div>
                        <div class="metric-label">INCä»·æ ¼</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="market-cap">400M</div>
                        <div class="metric-label">å¸‚å€¼</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="daily-volume">2.5M</div>
                        <div class="metric-label">æ—¥äº¤æ˜“é‡</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="total-contributions">15.2K</div>
                        <div class="metric-label">æ€»è´¡çŒ®æ•°</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="simulation-demo">
            <h3 style="color: #ffd700; margin-bottom: 20px;">ç»æµç³»ç»Ÿæ¼”ç¤º</h3>
            <button class="demo-button" onclick="simulateKnowledgeContribution()">æ¨¡æ‹ŸçŸ¥è¯†è´¡çŒ®</button>
            <button class="demo-button" onclick="simulateMarketDynamics()">å¸‚åœºåŠ¨æ€æ¨¡æ‹Ÿ</button>
            <button class="demo-button" onclick="demonstrateValueAssessment()">ä»·å€¼è¯„ä¼°æ¼”ç¤º</button>
            
            <div id="demo-result" class="demo-result"></div>
        </section>

        <nav class="navigation">
            <a href="index.html" class="nav-button">è¿”å›ä¸»é¡µ</a>
            <a href="ckb-pyramid.html" class="nav-button">å…±è¯†çŸ¥è¯†åº“</a>
            <a href="frequency-analysis.html" class="nav-button">é¢‘ç‡åˆ†æ</a>
            <a href="ai-evolution.html" class="nav-button">AIè‡ªæ¼”åŒ–</a>
            <a href="dao-governance.html" class="nav-button">DAOæ²»ç†</a>
        </nav>
    </div>

    <script>
        // ç»æµç³»ç»Ÿæ ¸å¿ƒå¼•æ“
        class EconomicSystem {
            constructor() {
                this.canvas = document.getElementById('economy-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.animationId = null;
                this.setupCanvas();
                
                // ç»æµå‚æ•°
                this.baseRate = 1.0;
                this.currentPrice = 1.0;
                this.marketCap = 400000000;
                this.dailyVolume = 2500000;
                this.totalContributions = 15200;
                this.priceHistory = [];
                
                // ä»·å€¼è¯„ä¼°å‚æ•°
                this.knowledgeQuality = 0.75;
                this.domainScarcity = 1.20;
                this.carrierContribution = 0.85;
                
                // ä»£å¸åˆ†é…
                this.tokenAllocation = {
                    community: 0.40,
                    team: 0.20,
                    ecosystem: 0.25,
                    dao: 0.15
                };
            }
            
            setupCanvas() {
                const rect = this.canvas.getBoundingClientRect();
                this.canvas.width = rect.width * window.devicePixelRatio;
                this.canvas.height = rect.height * window.devicePixelRatio;
                this.ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
                this.canvas.style.width = rect.width + 'px';
                this.canvas.style.height = rect.height + 'px';
            }
            
            // è®¡ç®—çŸ¥è¯†ä»·å€¼ç³»æ•° Q_c
            calculateKnowledgeValue(quality, innovation, utility, stability) {
                // Q_c = f(quality, innovation, utility, stability)
                const weights = { quality: 0.4, innovation: 0.25, utility: 0.2, stability: 0.15 };
                return (
                    quality * weights.quality +
                    innovation * weights.innovation +
                    utility * weights.utility +
                    stability * weights.stability
                );
            }
            
            // è®¡ç®—ç¨€ç¼ºç³»æ•° S_c
            calculateScarcityCoefficient(domainHeat, knowledgeDensity) {
                // S_c = f(domain_heat, knowledge_density)
                const baseScarcity = 1.0;
                const heatFactor = Math.log(domainHeat + 1) * 0.3;
                const densityFactor = (2.0 - knowledgeDensity) * 0.2;
                return Math.max(0.5, Math.min(2.0, baseScarcity + heatFactor + densityFactor));
            }
            
            // è®¡ç®—è½½ä½“è´¡çŒ®ç³»æ•° V_c
            calculateCarrierContribution(credibility, influence, contribution, security) {
                // V_c = g(credibility, influence, contribution, security)
                const weights = { credibility: 0.3, influence: 0.25, contribution: 0.3, security: 0.15 };
                return (
                    credibility * weights.credibility +
                    influence * weights.influence +
                    contribution * weights.contribution +
                    security * weights.security
                );
            }
            
            // è®¡ç®—æœ€ç»ˆæ±‡ç‡ E_rate
            calculateExchangeRate(Q_c, S_c, V_c) {
                // E_rate = Base_rate Ã— Q_c Ã— S_c Ã— V_c
                return this.baseRate * Q_c * S_c * V_c;
            }
            
            // è¯„ä¼°ç»æµä»·å€¼
            assessEconomicValue(knowledgeQuality, domainScarcity, carrierContribution, contributionType) {
                const Q_c = this.calculateKnowledgeValue(knowledgeQuality, 0.8, 0.7, 0.9);
                const S_c = domainScarcity;
                const V_c = carrierContribution;
                
                const exchangeRate = this.calculateExchangeRate(Q_c, S_c, V_c);
                
                // æ ¹æ®è´¡çŒ®ç±»å‹è°ƒæ•´å¥–åŠ±
                let typeMultiplier = 1.0;
                switch (contributionType) {
                    case 'knowledge':
                        typeMultiplier = 1.2;
                        break;
                    case 'validation':
                        typeMultiplier = 0.8;
                        break;
                    case 'governance':
                        typeMultiplier = 1.0;
                        break;
                    case 'ecosystem':
                        typeMultiplier = 0.9;
                        break;
                }
                
                const finalReward = exchangeRate * typeMultiplier * 100; // åŸºç¡€å¥–åŠ±100 INC
                
                return {
                    Q_c: Q_c,
                    S_c: S_c,
                    V_c: V_c,
                    exchangeRate: exchangeRate,
                    finalReward: finalReward,
                    typeMultiplier: typeMultiplier
                };
            }
            
            // æ¨¡æ‹Ÿå¸‚åœºåŠ¨æ€
            simulateMarketDynamics() {
                // éšæœºå¸‚åœºæ³¢åŠ¨
                const volatility = 0.05;
                const trend = (Math.random() - 0.5) * volatility;
                
                this.currentPrice *= (1 + trend);
                this.currentPrice = Math.max(0.1, Math.min(10.0, this.currentPrice));
                
                // æ›´æ–°å¸‚å€¼
                this.marketCap = this.currentPrice * 1000000000; // æ€»ä¾›åº”é‡
                
                // æ›´æ–°äº¤æ˜“é‡
                this.dailyVolume *= (1 + (Math.random() - 0.5) * 0.3);
                this.dailyVolume = Math.max(100000, Math.min(10000000, this.dailyVolume));
                
                // è®°å½•ä»·æ ¼å†å²
                this.priceHistory.push(this.currentPrice);
                if (this.priceHistory.length > 50) {
                    this.priceHistory.shift();
                }
                
                return {
                    price: this.currentPrice,
                    marketCap: this.marketCap,
                    volume: this.dailyVolume
                };
            }
            
            // ç»˜åˆ¶ç»æµå›¾è¡¨
            drawEconomicChart() {
                if (!this.ctx) return;
                
                const width = this.canvas.width / window.devicePixelRatio;
                const height = this.canvas.height / window.devicePixelRatio;
                
                this.ctx.clearRect(0, 0, width, height);
                
                // ç»˜åˆ¶èƒŒæ™¯ç½‘æ ¼
                this.drawGrid(width, height);
                
                // ç»˜åˆ¶ä»·æ ¼å†å²
                this.drawPriceHistory(width, height);
                
                // ç»˜åˆ¶å½“å‰æŒ‡æ ‡
                this.drawCurrentMetrics(width, height);
            }
            
            drawGrid(width, height) {
                this.ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                this.ctx.lineWidth = 1;
                
                // å‚ç›´ç½‘æ ¼çº¿
                for (let i = 0; i <= 10; i++) {
                    const x = (width / 10) * i;
                    this.ctx.beginPath();
                    this.ctx.moveTo(x, 0);
                    this.ctx.lineTo(x, height);
                    this.ctx.stroke();
                }
                
                // æ°´å¹³ç½‘æ ¼çº¿
                for (let i = 0; i <= 5; i++) {
                    const y = (height / 5) * i;
                    this.ctx.beginPath();
                    this.ctx.moveTo(0, y);
                    this.ctx.lineTo(width, y);
                    this.ctx.stroke();
                }
            }
            
            drawPriceHistory(width, height) {
                if (this.priceHistory.length < 2) return;
                
                this.ctx.strokeStyle = '#ffd700';
                this.ctx.lineWidth = 2;
                this.ctx.beginPath();
                
                const stepX = width / (this.priceHistory.length - 1);
                const maxPrice = Math.max(...this.priceHistory, 2.0);
                const minPrice = Math.min(...this.priceHistory, 0.5);
                const priceRange = maxPrice - minPrice;
                
                for (let i = 0; i < this.priceHistory.length; i++) {
                    const x = i * stepX;
                    const normalizedPrice = (this.priceHistory[i] - minPrice) / priceRange;
                    const y = height - (normalizedPrice * height * 0.8 + height * 0.1);
                    
                    if (i === 0) {
                        this.ctx.moveTo(x, y);
                    } else {
                        this.ctx.lineTo(x, y);
                    }
                }
                
                this.ctx.stroke();
            }
            
            drawCurrentMetrics(width, height) {
                // ç»˜åˆ¶å½“å‰ä»·æ ¼æŒ‡ç¤ºå™¨
                const currentY = height - (this.currentPrice / 2.0) * height * 0.8 - height * 0.1;
                
                this.ctx.fillStyle = '#00ff00';
                this.ctx.beginPath();
                this.ctx.arc(width - 10, currentY, 4, 0, 2 * Math.PI);
                this.ctx.fill();
                
                // æ·»åŠ æ ‡ç­¾
                this.ctx.fillStyle = '#ffffff';
                this.ctx.font = '12px Courier New';
                this.ctx.fillText(`$${this.currentPrice.toFixed(2)}`, width - 50, currentY - 10);
            }
            
            // æ›´æ–°ç•Œé¢æ˜¾ç¤º
            updateDisplay() {
                document.getElementById('current-price').textContent = this.currentPrice.toFixed(2);
                document.getElementById('market-cap').textContent = this.formatNumber(this.marketCap);
                document.getElementById('daily-volume').textContent = this.formatNumber(this.dailyVolume);
                document.getElementById('total-contributions').textContent = this.formatNumber(this.totalContributions);
                
                // æ›´æ–°ä»·å€¼è¯„ä¼°å‚æ•°
                document.getElementById('knowledge-value').textContent = this.knowledgeQuality.toFixed(2);
                document.getElementById('scarcity-coeff').textContent = this.domainScarcity.toFixed(2);
                document.getElementById('carrier-coeff').textContent = this.carrierContribution.toFixed(2);
                
                const Q_c = this.calculateKnowledgeValue(this.knowledgeQuality, 0.8, 0.7, 0.9);
                const finalRate = this.calculateExchangeRate(Q_c, this.domainScarcity, this.carrierContribution);
                document.getElementById('final-rate').textContent = finalRate.toFixed(2);
            }
            
            // æ ¼å¼åŒ–æ•°å­—
            formatNumber(num) {
                if (num >= 1000000) {
                    return (num / 1000000).toFixed(1) + 'M';
                } else if (num >= 1000) {
                    return (num / 1000).toFixed(1) + 'K';
                } else {
                    return num.toString();
                }
            }
        }
        
        // åˆå§‹åŒ–ç»æµç³»ç»Ÿ
        const economicSystem = new EconomicSystem();
        
        // è®¡ç®—ç»æµä»·å€¼
        function calculateEconomicValue() {
            const knowledgeQuality = parseFloat(document.getElementById('knowledge-quality').value);
            const domainScarcity = parseFloat(document.getElementById('domain-scarcity').value);
            const carrierContribution = parseFloat(document.getElementById('carrier-contribution').value);
            const contributionType = document.getElementById('contribution-type').value;
            
            const result = economicSystem.assessEconomicValue(knowledgeQuality, domainScarcity, carrierContribution, contributionType);
            
            let statusText = `<strong>ç»æµä»·å€¼è¯„ä¼°ç»“æœ:</strong><br>`;
            statusText += `çŸ¥è¯†ä»·å€¼ç³»æ•° (Q_c): ${result.Q_c.toFixed(4)}<br>`;
            statusText += `ç¨€ç¼ºç³»æ•° (S_c): ${result.S_c.toFixed(4)}<br>`;
            statusText += `è½½ä½“è´¡çŒ®ç³»æ•° (V_c): ${result.V_c.toFixed(4)}<br>`;
            statusText += `åŸºç¡€æ±‡ç‡: ${result.exchangeRate.toFixed(4)}<br>`;
            statusText += `è´¡çŒ®ç±»å‹ä¹˜æ•°: ${result.typeMultiplier.toFixed(2)}<br>`;
            statusText += `<strong>æœ€ç»ˆå¥–åŠ±: ${result.finalReward.toFixed(2)} INC</strong>`;
            
            document.getElementById('calculation-result').innerHTML = statusText;
            
            // æ›´æ–°ç»æµç³»ç»Ÿå‚æ•°
            economicSystem.knowledgeQuality = knowledgeQuality;
            economicSystem.domainScarcity = domainScarcity;
            economicSystem.carrierContribution = carrierContribution;
            
            // æ›´æ–°æ˜¾ç¤º
            economicSystem.updateDisplay();
            
            // ç»˜åˆ¶å›¾è¡¨
            economicSystem.drawEconomicChart();
        }
        
        // æ›´æ–°çŸ¥è¯†è´¨é‡
        function updateKnowledgeQuality(value) {
            economicSystem.knowledgeQuality = parseFloat(value);
            document.getElementById('quality-display').textContent = parseFloat(value).toFixed(2);
        }
        
        // æ›´æ–°é¢†åŸŸç¨€ç¼ºæ€§
        function updateDomainScarcity(value) {
            economicSystem.domainScarcity = parseFloat(value);
            document.getElementById('scarcity-display').textContent = parseFloat(value).toFixed(2);
        }
        
        // æ›´æ–°è½½ä½“è´¡çŒ®
        function updateCarrierContribution(value) {
            economicSystem.carrierContribution = parseFloat(value);
            document.getElementById('contribution-display').textContent = parseFloat(value).toFixed(2);
        }
        
        // æ¨¡æ‹ŸçŸ¥è¯†è´¡çŒ®
        function simulateKnowledgeContribution() {
            const result = document.getElementById('demo-result');
            result.style.display = 'block';
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                
                // æ¨¡æ‹ŸçŸ¥è¯†è´¡çŒ®è¿‡ç¨‹
                const knowledgeQuality = 0.6 + Math.random() * 0.4;
                const domainScarcity = 0.8 + Math.random() * 1.2;
                const carrierContribution = 0.5 + Math.random() * 0.5;
                
                const economicResult = economicSystem.assessEconomicValue(knowledgeQuality, domainScarcity, carrierContribution, 'knowledge');
                
                result.innerHTML = `
                    <h4 style="color: #ffd700; margin-bottom: 15px;">çŸ¥è¯†è´¡çŒ®æ¨¡æ‹Ÿ</h4>
                    <div style="background: rgba(255,215,0,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                        æ¨¡æ‹Ÿè¿›åº¦: ${progress}%
                    </div>
                    <div style="background: rgba(255,140,0,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                        çŸ¥è¯†è´¨é‡: ${knowledgeQuality.toFixed(3)}
                    </div>
                    <div style="background: rgba(255,215,0,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                        ç¨€ç¼ºç³»æ•°: ${domainScarcity.toFixed(3)}
                    </div>
                    <div style="background: rgba(255,140,0,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                        è½½ä½“è´¡çŒ®: ${carrierContribution.toFixed(3)}
                    </div>
                `;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    result.innerHTML += `
                        <div style="margin-top: 15px; color: #00ff00;">
                            âœ“ çŸ¥è¯†è´¡çŒ®æ¨¡æ‹Ÿå®Œæˆï¼<br>
                            è·å¾—å¥–åŠ±: ${economicResult.finalReward.toFixed(2)} INC<br>
                            è´¡çŒ®å·²è®°å½•åˆ°åŒºå—é“¾ï¼ŒV_cç³»æ•°å·²æ›´æ–°
                        </div>
                    `;
                    
                    // æ›´æ–°è´¡çŒ®æ•°
                    economicSystem.totalContributions += 1;
                    economicSystem.updateDisplay();
                }
            }, 300);
        }
        
        // æ¨¡æ‹Ÿå¸‚åœºåŠ¨æ€
        function simulateMarketDynamics() {
            const result = document.getElementById('demo-result');
            result.style.display = 'block';
            
            result.innerHTML = `
                <h4 style="color: #ffd700; margin-bottom: 15px;">å¸‚åœºåŠ¨æ€æ¨¡æ‹Ÿ</h4>
                <div style="background: rgba(255,215,0,0.1); padding: 10px; border-radius: 5px; margin: 8px 0;">
                    æ­£åœ¨æ¨¡æ‹Ÿå¸‚åœºæ³¢åŠ¨...
                </div>
            `;
            
            let simulationCount = 0;
            const maxSimulations = 20;
            
            const marketInterval = setInterval(() => {
                simulationCount++;
                const marketResult = economicSystem.simulateMarketDynamics();
                
                if (simulationCount % 5 === 0) {
                    result.innerHTML += `
                        <div style="background: rgba(255,140,0,0.1); padding: 8px; border-radius: 5px; margin: 3px 0;">
                            å‘¨æœŸ ${simulationCount}: ä»·æ ¼ $${marketResult.price.toFixed(2)}, å¸‚å€¼ $${(marketResult.marketCap/1000000).toFixed(1)}M
                        </div>
                    `;
                }
                
                // æ›´æ–°æ˜¾ç¤º
                economicSystem.updateDisplay();
                economicSystem.drawEconomicChart();
                
                if (simulationCount >= maxSimulations) {
                    clearInterval(marketInterval);
                    result.innerHTML += `
                        <div style="margin-top: 15px; color: #00ff00;">
                            âœ“ å¸‚åœºåŠ¨æ€æ¨¡æ‹Ÿå®Œæˆï¼<br>
                            æœ€ç»ˆä»·æ ¼: $${economicSystem.currentPrice.toFixed(2)}<br>
                            ä»·æ ¼æ³¢åŠ¨ç‡: ${((economicSystem.currentPrice - 1.0) * 100).toFixed(2)}%<br>
                            å¸‚åœºç¨³å®šæ€§: è‰¯å¥½
                        </div>
                    `;
                }
            }, 200);
        }
        
        // æ¼”ç¤ºä»·å€¼è¯„ä¼°
        function demonstrateValueAssessment() {
            const result = document.getElementById('demo-result');
            result.style.display = 'block';
            
            // ç”Ÿæˆå¤šä¸ªè¯„ä¼°æ¡ˆä¾‹
            const testCases = [
                { quality: 0.9, scarcity: 1.5, carrier: 0.9, type: 'knowledge', desc: 'é«˜è´¨é‡å­¦æœ¯ç ”ç©¶' },
                { quality: 0.7, scarcity: 1.1, carrier: 0.8, type: 'validation', desc: 'ä¸“ä¸šéªŒè¯å·¥ä½œ' },
                { quality: 0.8, scarcity: 0.9, carrier: 0.7, type: 'governance', desc: 'æ²»ç†å†³ç­–å‚ä¸' },
                { quality: 0.6, scarcity: 1.3, carrier: 0.6, type: 'ecosystem', desc: 'ç”Ÿæ€å»ºè®¾è´¡çŒ®' }
            ];
            
            let html = `<h4 style="color: #ffd700; margin-bottom: 15px;">ä»·å€¼è¯„ä¼°æ¼”ç¤º</h4>`;
            
            testCases.forEach((testCase, index) => {
                const result = economicSystem.assessEconomicValue(
                    testCase.quality, 
                    testCase.scarcity, 
                    testCase.carrier, 
                    testCase.type
                );
                
                const bgColor = index % 2 === 0 ? 'rgba(255,215,0,0.1)' : 'rgba(255,140,0,0.1)';
                const borderColor = index % 2 === 0 ? '#ffd700' : '#ff8c00';
                
                html += `
                    <div style="background: ${bgColor}; padding: 10px; border-radius: 5px; margin: 8px 0; border-left: 4px solid ${borderColor};">
                        <strong>${testCase.desc}</strong><br>
                        Q_c=${result.Q_c.toFixed(3)}, S_c=${result.S_c.toFixed(3)}, V_c=${result.V_c.toFixed(3)}<br>
                        æ±‡ç‡: ${result.exchangeRate.toFixed(3)} Ã— ${result.typeMultiplier.toFixed(2)} = ${(result.exchangeRate * result.typeMultiplier).toFixed(3)}<br>
                        <strong>å¥–åŠ±: ${result.finalReward.toFixed(2)} INC</strong>
                    </div>
                `;
            });
            
            result.innerHTML = html;
        }
        
        // é¡µé¢åŠ è½½åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ä¿¡æ¯å¸ç»æµç³»ç»Ÿå·²åˆå§‹åŒ–');
            console.log('æ ¸å¿ƒç®—æ³•:');
            console.log('- çŸ¥è¯†ä»·å€¼: Q_c = f(è´¨é‡, åˆ›æ–°, å®ç”¨, ç¨³å®š)');
            console.log('- ç¨€ç¼ºç³»æ•°: S_c = f(é¢†åŸŸçƒ­åº¦, çŸ¥è¯†å¯†åº¦)');
            console.log('- è½½ä½“è´¡çŒ®: V_c = g(å¯ä¿¡åº¦, å½±å“åŠ›, è´¡çŒ®, å®‰å…¨)');
            console.log('- æœ€ç»ˆæ±‡ç‡: E_rate = Base_rate Ã— Q_c Ã— S_c Ã— V_c');
            
            // åˆå§‹åŒ–æ˜¾ç¤º
            economicSystem.updateDisplay();
            economicSystem.drawEconomicChart();
            
            // å¯åŠ¨å¸‚åœºåŠ¨æ€æ¨¡æ‹Ÿ
            setInterval(() => {
                economicSystem.simulateMarketDynamics();
                economicSystem.updateDisplay();
                economicSystem.drawEconomicChart();
            }, 3000);
        });
        
        // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°è®¾ç½®canvas
        window.addEventListener('resize', function() {
            economicSystem.setupCanvas();
            economicSystem.drawEconomicChart();
        });
    </script>
</body>
</html>